<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Interview - Interviewer AI</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* General container styling */
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f7f9fc;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            width: 80%;
            max-width: 800px;
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        label {
            font-size: 18px;
            color: #555;
            display: block;
            margin-bottom: 10px;
        }

        select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }

        /* Question and Answer Area */
        .question-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #question-text {
            font-size: 18px;
            color: #333;
            margin-top: 20px;
        }

        textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
            resize: vertical;
        }

        /* Button Styles */
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .next-button, .skip-button, .end-button, .okay-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .next-button {
            background-color: #4caf50;
            color: white;
        }
        .next-button:hover {
            background-color: #45a049;
        }

        .skip-button {
            background-color: #ff9800;
            color: white;
        }
        .skip-button:hover {
            background-color: #e68a00;
        }

        .end-button {
            background-color: #f44336;
            color: white;
        }
        .end-button:hover {
            background-color: #d32f2f;
        }

        .okay-button {
            background-color: #007bff;
            color: white;
            margin-top: 20px;
            display: block;
        }
        .okay-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .okay-button:hover:not(:disabled) {
            background-color: #0069d9;
        }

        /* Report Container */
        #report-container {
            margin-top: 30px;
        }

        #report {
            list-style: none;
            padding: 0;
            color: #333;
            font-size: 16px;
        }

        #report li {
            padding: 10px;
            background-color: #f1f1f1;
            margin-bottom: 5px;
            border-radius: 5px;
        }

        /* Chart Styling */
        canvas {
            max-width: 70%;
            margin-top: 20px;
        }

        #statistics {
            text-align: center;
            font-size: 18px;
            color: #555;
        }

        /* Hide on Start Interview */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Field and Level Selection Section -->
        <div id="selection-container">
            <h2>Text-Based Interview</h2>
            <label>Select Field:</label>
            <select id="fieldSelect" onchange="enableOkayButton()">
                <option value="">--Select a field--</option>
                <option value="software">Software Development</option>
                <option value="dataScience">Data Science</option>
                <option value="marketing">Marketing</option>
                <option value="finance">Finance</option>
                <option value="design">Design</option>
            </select>

            <label>Select Level:</label>
            <select id="levelSelect" onchange="enableOkayButton()">
                <option value="">--Select a level--</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="professional">Professional</option>
            </select>

            <button class="okay-button" onclick="startInterview()" id="okayButton" disabled>Okay</button>
        </div>

        <!-- Question and Answer Section -->
        <div id="question-area" class="hidden">
            <p id="question-text">Question 1:</p>
            <textarea id="answer" placeholder="Your answer..."></textarea>
            <div class="button-group">
                <button class="next-button" onclick="nextQuestion()">Next</button>
                <button class="skip-button" onclick="skipQuestion()">Skip</button>
                <button class="end-button" onclick="endInterview()">End Interview</button>
            </div>
        </div>
        
        <!-- Report Section -->
        <div id="report-container" class="hidden">
            <h1>Interview Report</h1>
            <ul id="report"></ul>
            <h3>Analysis & Advice</h3>
            <p id="analysis"></p>
            <h3>Statistics</h3>
            <div style="width: 100%; margin: 0 auto;">
                <canvas id="timeChart"></canvas>
                <canvas id="completionChart" style="margin-top: 20px;"></canvas>
                <canvas id="responseTimeChart" style="margin-top: 20px;"></canvas>
            </div>
            
        </div>
    </div>

    <script>
        // Level-based questions for each field
        const questionsByFieldAndLevel = {
            software: {
                beginner: [
                    "What programming languages are you familiar with?",
                    "What IDEs or text editors do you prefer for coding?",
                    "Explain the basic structure of a program in a language of your choice.",
                    "What is a variable, and how do you declare it?",
                    "How do you debug a basic program error?"
                ],
                intermediate: [
                    "Describe a challenging software project you've worked on.",
                    "How do you handle debugging in your projects?",
                    "What are some essential design patterns you use regularly?",
                    "What is your approach to refactoring code?",
                    "How do you optimize software performance?"
                ],
                professional: [
                    "Describe a system architecture you've designed or improved.",
                    "How do you ensure scalability in your applications?",
                    "What strategies do you employ for performance optimization?",
                    "How do you manage security in a large software project?",
                    "Explain your experience with CI/CD pipelines."
                ]
            },
            dataScience: {
                beginner: [
                    "What tools have you used for data analysis?",
                    "Explain the difference between structured and unstructured data.",
                    "How would you handle missing data in a dataset?",
                    "What is a data frame, and how do you use it?",
                    "Describe a basic data visualization project."
                ],
                intermediate: [
                    "Describe a data analysis project you've completed.",
                    "What techniques do you use for data cleaning?",
                    "How do you evaluate a machine learning model's accuracy?",
                    "Explain how you handle imbalanced datasets.",
                    "What are some common pitfalls in data preprocessing?"
                ],
                professional: [
                    "Explain a machine learning project from start to finish.",
                    "How do you choose the right algorithm for a complex dataset?",
                    "What methods do you use for feature engineering?",
                    "Describe your experience with large-scale data processing.",
                    "How do you ensure the interpretability of your models?"
                ]
            },
            marketing: {
                beginner: [
                    "What are the key components of a marketing campaign?",
                    "How do you research a target audience?",
                    "Explain how you use social media for marketing.",
                    "What tools do you use for basic analytics?",
                    "Describe a simple email marketing strategy."
                ],
                intermediate: [
                    "Describe a time you had to pivot a marketing strategy.",
                    "How do you measure campaign success?",
                    "What methods do you use for content marketing?",
                    "How do you manage cross-platform marketing?",
                    "Explain how you use data for customer insights."
                ],
                professional: [
                    "Describe a marketing strategy for a new product launch.",
                    "How do you manage large marketing budgets?",
                    "Explain your experience with brand management.",
                    "How do you approach competitive analysis?",
                    "Describe your experience with paid advertising campaigns."
                ]
            },
            finance: {
                beginner: [
                    "Explain basic financial statements.",
                    "How do you track personal finances?",
                    "What are assets and liabilities?",
                    "Explain the concept of budgeting.",
                    "What are the common types of expenses?"
                ],
                intermediate: [
                    "Describe a time you analyzed financial data for insights.",
                    "How do you assess financial risks?",
                    "What tools do you use for forecasting?",
                    "Explain the basics of financial modeling.",
                    "How do you manage company budgets?"
                ],
                professional: [
                    "Describe a financial analysis project you led.",
                    "How do you manage investment portfolios?",
                    "Explain complex financial risk assessment methods.",
                    "Describe your approach to strategic financial planning.",
                    "What is your experience with mergers and acquisitions?"
                ]
            },
            design: {
                beginner: [
                    "What design tools are you familiar with?",
                    "Explain the concept of color theory.",
                    "How do you choose fonts for a project?",
                    "What is your process for brainstorming ideas?",
                    "Describe your experience with layout design."
                ],
                intermediate: [
                    "Describe a project where you handled client feedback.",
                    "How do you incorporate UX principles into your design?",
                    "What methods do you use for wireframing?",
                    "Explain the importance of accessibility in design.",
                    "How do you ensure consistency in design?"
                ],
                professional: [
                    "Describe your approach to creating a brand identity.",
                    "How do you manage a design project from start to finish?",
                    "Explain a time when you led a design team.",
                    "What is your experience with high-fidelity prototypes?",
                    "How do you integrate user feedback into your designs?"
                ]
            }
        };

        let selectedField = "";
        let selectedLevel = "";
        let selectedQuestions = [];
        let answers = [];
        let questionIndex = 0;
        let startTime = 0;
        let timeSpent = [];

        function enableOkayButton() {
            const field = document.getElementById("fieldSelect").value;
            const level = document.getElementById("levelSelect").value;
            document.getElementById("okayButton").disabled = !(field && level);
        }

        function startInterview() {
            selectedField = document.getElementById("fieldSelect").value;
            selectedLevel = document.getElementById("levelSelect").value;

            if (selectedField && selectedLevel && questionsByFieldAndLevel[selectedField][selectedLevel]) {
                selectedQuestions = questionsByFieldAndLevel[selectedField][selectedLevel];
                questionIndex = 0;
                answers = [];
                timeSpent = [];
                
                // Hide field and level selection, and show question area
                document.getElementById("selection-container").classList.add("hidden");
                document.getElementById("question-area").classList.remove("hidden");

                startTime = Date.now();
                loadQuestion();
            }
        }

        function loadQuestion() {
            document.getElementById("question-text").textContent = `Question ${questionIndex + 1}: ${selectedQuestions[questionIndex]}`;
            document.getElementById("answer").value = "";
            startTime = Date.now();
        }

        function nextQuestion() {
            const answer = document.getElementById("answer").value;
            if (answer.trim()) {
                answers.push(answer);
                const endTime = Date.now();
                timeSpent.push((endTime - startTime) / 1000);
                questionIndex++;
                
                if (questionIndex < selectedQuestions.length) {
                    loadQuestion();
                } else {
                    generateReport();
                }
            } else {
                alert("Please enter an answer before proceeding.");
            }
        }

        function skipQuestion() {
            answers.push("Skipped");
            timeSpent.push(0);
            questionIndex++;
            
            if (questionIndex < selectedQuestions.length) {
                loadQuestion();
            } else {
                generateReport();
            }
        }

        function endInterview() {
            generateReport();
        }

        function generateReport() {
            document.getElementById("question-area").classList.add("hidden");
            document.getElementById("report-container").classList.remove("hidden");

            const report = document.getElementById("report");
            report.innerHTML = "";
            
            answers.forEach((answer, index) => {
                const listItem = document.createElement("li");
                listItem.textContent = `Q${index + 1}: ${selectedQuestions[index]} - A: ${answer}`;
                report.appendChild(listItem);
            });
            
            provideGeneralAdvice();
            displayCharts();
        }

        function displayCharts() {
            const completedQuestions = answers.filter(answer => answer !== "Skipped").length;
            const skippedQuestions = answers.filter(answer => answer === "Skipped").length;

            new Chart(document.getElementById("timeChart"), {
                type: 'bar',
                data: {
                    labels: selectedQuestions.map((_, i) => `Q${i + 1}`),
                    datasets: [{
                        label: 'Time Spent (seconds)',
                        data: timeSpent,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            new Chart(document.getElementById("completionChart"), {
                type: 'pie',
                data: {
                    labels: ['Completed', 'Skipped'],
                    datasets: [{
                        data: [completedQuestions, skippedQuestions],
                        backgroundColor: ['#4caf50', '#f44336']
                    }]
                }
            });
        }

        function provideGeneralAdvice() {
            const analysis = document.getElementById("analysis");
            if (selectedField === "software") {
                analysis.textContent = "Focus on mastering coding basics if you're a beginner, design patterns for intermediates, and scalability for professionals.";
            }
            // Additional advice based on field and level
        }
    </script>
</body>
</html>
