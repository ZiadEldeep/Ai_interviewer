<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Interview - Interviewer AI</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* General container styling */
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f7f9fc;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            width: 80%;
            max-width: 800px;
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        label {
            font-size: 18px;
            color: #555;
            display: block;
            margin-bottom: 10px;
        }

        select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }

        /* Question and Answer Area */
        .question-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #question-text {
            font-size: 18px;
            color: #333;
            margin-top: 20px;
        }

        textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
            resize: vertical;
        }

        /* Button Styles */
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .next-button, .skip-button, .end-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .next-button {
            background-color: #4caf50;
            color: white;
        }
        .next-button:hover {
            background-color: #45a049;
        }

        .skip-button {
            background-color: #ff9800;
            color: white;
        }
        .skip-button:hover {
            background-color: #e68a00;
        }

        .end-button {
            background-color: #f44336;
            color: white;
        }
        .end-button:hover {
            background-color: #d32f2f;
        }

        /* Report Container */
        #report-container {
            margin-top: 30px;
        }

        #report {
            list-style: none;
            padding: 0;
            color: #333;
            font-size: 16px;
        }

        #report li {
            padding: 10px;
            background-color: #f1f1f1;
            margin-bottom: 5px;
            border-radius: 5px;
        }

        /* Chart Styling */
        canvas {
            max-width: 100%;
            margin-top: 20px;
        }

        #statistics {
            text-align: center;
            font-size: 18px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="question-container">
            <h2>Text-Based Interview</h2>
            <label>Select Field:</label>
            <select id="fieldSelect" onchange="startInterview()">
                <option value="">--Select a field--</option>
                <option value="software">Software Development</option>
                <option value="dataScience">Data Science</option>
                <option value="marketing">Marketing</option>
                <option value="finance">Finance</option>
                <option value="design">Design</option>
            </select>

            <div id="question-area" style="display:none;">
                <p id="question-text">Question 1:</p>
                <textarea id="answer" placeholder="Your answer..."></textarea>
                <div class="button-group">
                    <button class="next-button" onclick="nextQuestion()">Next</button>
                    <button class="skip-button" onclick="skipQuestion()">Skip</button>
                    <button class="end-button" onclick="endInterview()">End Interview</button>
                </div>
            </div>
            
            <div id="report-container" style="display:none;">
                <h3>Interview Report</h3>
                <ul id="report"></ul>
                <h3>Statistics</h3>
                <div style="width: 100%; margin: 0 auto;">
                    <canvas id="timeChart"></canvas>
                    <canvas id="completionChart" style="margin-top: 20px;"></canvas>
                    <canvas id="distributionChart" style="margin-top: 20px;"></canvas>
                    <canvas id="progressChart" style="margin-top: 20px;"></canvas>
                </div>
                <h3>Analysis & Advice</h3>
                <p id="analysis"></p>
            </div>
        </div>
    </div>

    <script>
        // Realistic questions for each field
        const questionsByField = {
            software: [
                "What programming languages are you proficient in?",
                "Explain a challenging software project you've worked on.",
                "How do you approach debugging and troubleshooting code?",
                "Describe your experience with version control, such as Git.",
                "What is your process for writing clean, maintainable code?",
                "How do you ensure your code is optimized for performance?",
                "What is your experience with Agile development methodologies?",
                "How do you manage dependencies in your projects?",
                "Explain the differences between object-oriented and functional programming.",
                "Describe a time when you had to refactor existing code.",
                // More questions up to 50...
            ],
            dataScience: [
                "What are the steps you take when starting a data analysis project?",
                "Describe a project where you used machine learning algorithms.",
                "How do you handle missing or incomplete data in a dataset?",
                "Explain the concept of overfitting and how you prevent it.",
                "What data visualization tools are you proficient in?",
                "How do you choose the right algorithm for a given problem?",
                "Explain a time you used Python or R for data analysis.",
                "What is your approach to feature engineering?",
                "How do you validate the accuracy of a model?",
                "Describe your experience with SQL for data manipulation.",
                // More questions up to 50...
            ],
            marketing: [
                "What are the key elements of a successful marketing campaign?",
                "Describe a time when you had to pivot a marketing strategy.",
                "How do you measure the effectiveness of a campaign?",
                "What tools do you use for market research and analysis?",
                "How do you approach content marketing for a new product?",
                "What is your experience with digital marketing and SEO?",
                "Explain your process for targeting the right audience.",
                "How do you use social media as part of your strategy?",
                "Describe a time you successfully increased brand awareness.",
                "How do you manage a marketing budget effectively?",
                // More questions up to 50...
            ],
            finance: [
                "Describe a time you analyzed financial data to make a recommendation.",
                "How do you approach financial forecasting?",
                "What techniques do you use for risk assessment?",
                "Explain your experience with budgeting and cost control.",
                "How do you keep up with financial regulations and standards?",
                "Describe your experience with financial modeling.",
                "What is your approach to analyzing financial statements?",
                "How do you assess the financial health of a company?",
                "Explain a complex financial concept you've communicated to a non-expert.",
                "What is your experience with mergers and acquisitions?",
                // More questions up to 50...
            ],
            design: [
                "What design software are you most comfortable with?",
                "Describe your design process from concept to final product.",
                "How do you handle feedback on your designs?",
                "Explain your approach to designing for accessibility.",
                "What is your process for staying creatively inspired?",
                "How do you incorporate user feedback into your designs?",
                "What are the essential elements of good UX design?",
                "Describe a project where you had to balance aesthetics with functionality.",
                "How do you approach designing for mobile vs. desktop?",
                "What trends do you see shaping the future of design?",
                // More questions up to 50...
            ]
        };

        let selectedField = "";
        let selectedFieldQuestions = [];
        let answers = [];
        let questionIndex = 0;
        let startTime = 0;
        let timeSpent = [];

        function startInterview() {
            selectedField = document.getElementById("fieldSelect").value;
            if (selectedField && questionsByField[selectedField]) {
                selectedFieldQuestions = questionsByField[selectedField];
                questionIndex = 0;
                answers = [];
                timeSpent = [];
                
                // Display the question area and load the first question
                document.getElementById("question-area").style.display = "block";
                document.getElementById("report-container").style.display = "none";
                startTime = Date.now();
                loadQuestion();
            }
        }

        function loadQuestion() {
            document.getElementById("question-text").textContent = `Question ${questionIndex + 1}: ${selectedFieldQuestions[questionIndex]}`;
            document.getElementById("answer").value = "";
            startTime = Date.now(); // Record start time for this question
        }

        function nextQuestion() {
            const answer = document.getElementById("answer").value;
            if (answer.trim()) {
                answers.push(answer);
                const endTime = Date.now();
                timeSpent.push((endTime - startTime) / 1000); // Time in seconds
                questionIndex++;
                
                if (questionIndex < selectedFieldQuestions.length) {
                    loadQuestion();
                } else {
                    generateReport();
                }
            } else {
                alert("Please enter an answer before proceeding.");
            }
        }

        function skipQuestion() {
            answers.push("Skipped"); // Mark the answer as "Skipped"
            timeSpent.push(0); // Add zero time for skipped question
            questionIndex++;
            
            if (questionIndex < selectedFieldQuestions.length) {
                loadQuestion();
            } else {
                generateReport();
            }
        }

        function endInterview() {
            generateReport();
        }

        function generateReport() {
            document.getElementById("question-area").style.display = "none";
            const report = document.getElementById("report");
            report.innerHTML = ""; // Clear previous report
            
            answers.forEach((answer, index) => {
                const listItem = document.createElement("li");
                listItem.textContent = `Q${index + 1}: ${selectedFieldQuestions[index]} - A: ${answer}`;
                report.appendChild(listItem);
            });
            
            document.getElementById("report-container").style.display = "block";
            displayCharts();
            provideGeneralAdvice();
        }

        // Display charts
        function displayCharts() {
            const totalQuestions = selectedFieldQuestions.length;
            const completedQuestions = answers.filter(answer => answer !== "Skipped").length;
            const skippedQuestions = answers.filter(answer => answer === "Skipped").length;
            const cumulativeCompletion = Array.from({ length: completedQuestions }, (_, i) => ((i + 1) / totalQuestions) * 100);
            const totalTimeSpent = timeSpent.reduce((sum, time) => sum + time, 0);
            const answeredTime = timeSpent.filter(time => time > 0).reduce((sum, time) => sum + time, 0);

            // Bar chart for time spent on each question
            new Chart(document.getElementById("timeChart"), {
                type: 'bar',
                data: {
                    labels: selectedFieldQuestions.map((_, i) => `Q${i + 1}`),
                    datasets: [{
                        label: 'Time Spent (seconds)',
                        data: timeSpent,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Pie chart for completed vs skipped questions
            new Chart(document.getElementById("completionChart"), {
                type: 'pie',
                data: {
                    labels: ['Completed', 'Skipped'],
                    datasets: [{
                        data: [completedQuestions, skippedQuestions],
                        backgroundColor: ['#4caf50', '#f44336']
                    }]
                }
            });

            // Doughnut chart for time distribution
            new Chart(document.getElementById("distributionChart"), {
                type: 'doughnut',
                data: {
                    labels: ['Answered Time', 'Skipped Time'],
                    datasets: [{
                        data: [answeredTime, totalTimeSpent - answeredTime],
                        backgroundColor: ['#2196f3', '#ffeb3b']
                    }]
                }
            });

            // Line chart for cumulative completion rate
            new Chart(document.getElementById("progressChart"), {
                type: 'line',
                data: {
                    labels: selectedFieldQuestions.slice(0, cumulativeCompletion.length).map((_, i) => `Q${i + 1}`),
                    datasets: [{
                        label: 'Cumulative Completion Rate (%)',
                        data: cumulativeCompletion,
                        fill: false,
                        borderColor: '#673ab7',
                        tension: 0.1
                    }]
                }
            });
        }

        // General advice based on the selected field
        function provideGeneralAdvice() {
            const analysis = document.getElementById("analysis");
            let feedback = "";

            if (selectedField === "software") {
                feedback = "For software development, it's beneficial to keep up with emerging technologies and tools. Practicing problem-solving and debugging will enhance your coding skills. Staying comfortable with version control, like Git, is crucial for collaborative work.";
            } else if (selectedField === "dataScience") {
                feedback = "In data science, data cleaning and preparation are key. Regularly practicing data analysis, machine learning algorithms, and visualization tools can build your expertise. Keep evaluating models to improve accuracy and relevance.";
            } else if (selectedField === "marketing") {
                feedback = "Successful marketing requires creativity and data-driven strategies. Analyzing campaign metrics and staying adaptable in a fast-paced industry will help you stay competitive. Experimenting with new ideas can set you apart.";
            } else if (selectedField === "finance") {
                feedback = "In finance, attention to detail and analytical skills are essential. Stay updated on financial trends, risk assessment practices, and data interpretation. Building expertise in financial modeling and forecasting is invaluable.";
            } else if (selectedField === "design") {
                feedback = "Design work thrives on creativity and adaptability. Keep refining your skills in design software and consider accessibility in your work. Incorporating feedback well can lead to more user-centered designs.";
            }

            analysis.textContent = feedback;
        }
    </script>
</body>
</html>
