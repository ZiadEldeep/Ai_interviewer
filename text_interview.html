<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Interview - Interviewer AI</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="question-container">
            <h2>Text-Based Interview</h2>
            <label>Select Field:</label>
            <select id="fieldSelect" onchange="startInterview()">
                <option value="">--Select a field--</option>
                <option value="software">Software Development</option>
                <option value="dataScience">Data Science</option>
                <option value="marketing">Marketing</option>
                <option value="finance">Finance</option>
                <option value="design">Design</option>
            </select>

            <div id="question-area" style="display:none;">
                <p id="question-text">Question 1:</p>
                <textarea id="answer" placeholder="Your answer..."></textarea>
                <div class="button-group">
                    <button class="next-button" onclick="nextQuestion()">Next</button>
                    <button class="skip-button" onclick="skipQuestion()">Skip</button>
                    <button class="end-button" onclick="endInterview()">End Interview</button>
                </div>
            </div>
            
            <div id="report-container" style="display:none;">
                <h3>Interview Report</h3>
                <ul id="report"></ul>
                <h3>Statistics</h3>
                <div style="width: 50%; margin: 0 auto;">
                    <canvas id="timeChart"></canvas>
                    <canvas id="completionChart" style="margin-top: 20px;"></canvas>
                </div>
                <h3>Analysis & Advice</h3>
                <p id="analysis"></p>
            </div>
        </div>
    </div>

    <script>
        // Field-specific questions (50 questions)
        const questionsByField = {
            software: Array.from({length: 50}, (_, i) => `Software Question ${i + 1}: Describe this topic in detail.`),
            dataScience: Array.from({length: 50}, (_, i) => `Data Science Question ${i + 1}: Provide an analysis for this topic.`),
            marketing: Array.from({length: 50}, (_, i) => `Marketing Question ${i + 1}: Explain the strategy behind this case.`),
            finance: Array.from({length: 50}, (_, i) => `Finance Question ${i + 1}: Assess the financial impact of this scenario.`),
            design: Array.from({length: 50}, (_, i) => `Design Question ${i + 1}: Describe your design process for this case.`)
        };

        let selectedField = "";
        let selectedFieldQuestions = [];
        let answers = [];
        let questionIndex = 0;
        let startTime = 0;
        let timeSpent = [];

        function startInterview() {
            selectedField = document.getElementById("fieldSelect").value;
            if (selectedField && questionsByField[selectedField]) {
                selectedFieldQuestions = questionsByField[selectedField];
                questionIndex = 0;
                answers = [];
                timeSpent = [];
                
                // Display the question area and load the first question
                document.getElementById("question-area").style.display = "block";
                document.getElementById("report-container").style.display = "none";
                startTime = Date.now();
                loadQuestion();
            }
        }

        function loadQuestion() {
            document.getElementById("question-text").textContent = `Question ${questionIndex + 1}: ${selectedFieldQuestions[questionIndex]}`;
            document.getElementById("answer").value = "";
            startTime = Date.now(); // Record start time for this question
        }

        function nextQuestion() {
            const answer = document.getElementById("answer").value;
            if (answer.trim()) {
                answers.push(answer);
                const endTime = Date.now();
                timeSpent.push((endTime - startTime) / 1000); // Time in seconds
                questionIndex++;
                
                if (questionIndex < selectedFieldQuestions.length) {
                    loadQuestion();
                } else {
                    generateReport();
                }
            } else {
                alert("Please enter an answer before proceeding.");
            }
        }

        function skipQuestion() {
            answers.push("Skipped"); // Mark the answer as "Skipped"
            timeSpent.push(0); // Add zero time for skipped question
            questionIndex++;
            
            if (questionIndex < selectedFieldQuestions.length) {
                loadQuestion();
            } else {
                generateReport();
            }
        }

        function endInterview() {
            generateReport();
        }

        function generateReport() {
            document.getElementById("question-area").style.display = "none";
            const report = document.getElementById("report");
            report.innerHTML = ""; // Clear previous report
            
            answers.forEach((answer, index) => {
                const listItem = document.createElement("li");
                listItem.textContent = `Q${index + 1}: ${selectedFieldQuestions[index]} - A: ${answer}`;
                report.appendChild(listItem);
            });
            
            document.getElementById("report-container").style.display = "block";
            displayCharts();
            provideGeneralAdvice();
        }

        // Display charts
        function displayCharts() {
            const totalQuestions = selectedFieldQuestions.length;
            const completedQuestions = answers.filter(answer => answer !== "Skipped").length;
            const skippedQuestions = answers.filter(answer => answer === "Skipped").length;
            const completionRate = ((completedQuestions / totalQuestions) * 100).toFixed(2);

            // Bar chart for time spent on each question
            const timeChart = new Chart(document.getElementById("timeChart"), {
                type: 'bar',
                data: {
                    labels: selectedFieldQuestions.map((_, i) => `Q${i + 1}`),
                    datasets: [{
                        label: 'Time Spent (seconds)',
                        data: timeSpent,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Pie chart for completion rate
            const completionChart = new Chart(document.getElementById("completionChart"), {
                type: 'pie',
                data: {
                    labels: ['Completed', 'Skipped'],
                    datasets: [{
                        data: [completedQuestions, skippedQuestions],
                        backgroundColor: ['#4caf50', '#f44336']
                    }]
                },
                options: {
                    responsive: true
                }
            });
        }

        // General advice based on the selected field
        function provideGeneralAdvice() {
            const analysis = document.getElementById("analysis");
            let feedback = "";

            if (selectedField === "software") {
                feedback = "For software development, it's beneficial to keep up with emerging technologies and tools. Practicing problem-solving and debugging will enhance your coding skills. Staying comfortable with version control, like Git, is crucial for collaborative work.";
            } else if (selectedField === "dataScience") {
                feedback = "In data science, data cleaning and preparation are key. Regularly practicing data analysis, machine learning algorithms, and visualization tools can build your expertise. Keep evaluating models to improve accuracy and relevance.";
            } else if (selectedField === "marketing") {
                feedback = "Successful marketing requires creativity and data-driven strategies. Analyzing campaign metrics and staying adaptable in a fast-paced industry will help you stay competitive. Experimenting with new ideas can set you apart.";
            } else if (selectedField === "finance") {
                feedback = "In finance, attention to detail and analytical skills are essential. Stay updated on financial trends, risk assessment practices, and data interpretation. Building expertise in financial modeling and forecasting is invaluable.";
            } else if (selectedField === "design") {
                feedback = "Design work thrives on creativity and adaptability. Keep refining your skills in design software and consider accessibility in your work. Incorporating feedback well can lead to more user-centered designs.";
            }

            analysis.textContent = feedback;
        }
    </script>
</body>
</html>
